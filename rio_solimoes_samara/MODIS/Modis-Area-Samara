/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var pf_area_principal_samara_2020_2021 = ee.FeatureCollection("users/samaralydia_GEE/DELIMITACAO_PLANICIE_FLUVIAL_MANACAPURU_"),
    dataset = ee.ImageCollection("MODIS/006/MOD09GQ"),
    falseColorVis = {"min":-100,"max":8000,"bands":["sur_refl_b02","sur_refl_b02","sur_refl_b01"]};
/***** End of imports. If edited, may not auto-convert in the playground. *****/

var uteisLandsat = require('users/renancassimiro/fapesp2020:utilidades/uteis_landsatTM');
var uteisGeral = require('users/renancassimiro/fapesp2020:utilidades/uteis_geral');
var colecaoPeriodoUmido = require('users/renancassimiro/fapesp2020:rio_solimoes_samara/landsat5_periodo_umido_planicie_rio_solimoes');

var imagemPeriodoUmidoLandsat = colecaoPeriodoUmido.imagemPeriodoUmido;
print(imagemPeriodoUmidoLandsat);

var cloud = imagemPeriodoUmidoLandsat.select('pixel_qa');
// If the cloud bit (5) is set and the cloud confidence (7) is high
// or the cloud shadow bit is set (3), then it's a bad pixel.
var mask = cloud.bitwiseAnd(1 << 5)
                  .and(cloud.bitwiseAnd(1 << 7))
                  .or(cloud.bitwiseAnd(1 << 3));

dataset = dataset.filterBounds(pf_area_principal_samara_2020_2021).filterDate('2008-02-02');
var imagemPeriodoUmidoMODIS = dataset.median().clip(pf_area_principal_samara_2020_2021);

var mosaico = ee.ImageCollection(imagemPeriodoUmidoMODIS, imagemPeriodoUmidoLandsat);

Map.centerObject(pf_area_principal_samara_2020_2021, 11);
Map.addLayer(mask, '', 'Mascara');
Map.addLayer(mosaico, '', 'Mosaico');
Map.addLayer(imagemPeriodoUmidoMODIS, falseColorVis, 'MODIS - Imagem do PerÃ­odo Chuvoso');
